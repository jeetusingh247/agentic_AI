<svg xmlns="http://www.w3.org/2000/svg" width="1500" height="1000" viewBox="0 0 1500 1000">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto">
      <path d="M0,0 L10,4 L0,8 z" fill="#2b2b2b"/>
    </marker>
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.12"/>
    </filter>
  </defs>

  <title>Agentic AI - Data Flow Diagram</title>

  <text x="750.0" y="40" text-anchor="middle" font-family="Verdana" font-size="20" font-weight="700">
    Agentic AI — Data Flow Diagram
  </text>

  <!-- Frontend -->
  <rect x="60" y="120" width="300" height="140" rx="10" fill="#ffffff" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="80" y="150" font-family="Verdana" font-size="13" font-weight="600">Frontend (React + TypeScript)</text>
  <text x="80" y="170" font-family="Verdana" font-size="12">Agent creation, file uploads, task triggers</text>
  <text x="80" y="190" font-family="Verdana" font-size="12">Connects via HTTPS / WebSocket</text>

  <!-- Backend API -->
  <rect x="420" y="120" width="320" height="160" rx="10" fill="#ffffff" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="440" y="150" font-family="Verdana" font-size="13" font-weight="600">FastAPI Backend</text>
  <text x="440" y="170" font-family="Verdana" font-size="12">Validates JWT, handles CRUD, orchestrates</text>
  <text x="440" y="190" font-family="Verdana" font-size="12">Stores metadata in Postgres</text>
  <text x="440" y="210" font-family="Verdana" font-size="12">Uploads files to Blob Storage</text>

  <!-- Redis Queue -->
  <rect x="820" y="140" width="200" height="120" rx="8" fill="#f9faff" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="840" y="170" font-family="Verdana" font-size="13" font-weight="600">Redis Queue</text>
  <text x="840" y="190" font-family="Verdana" font-size="12">Task queue / pub-sub events</text>

  <!-- Worker System -->
  <rect x="1080" y="120" width="340" height="160" rx="10" fill="#ffffff" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="1100" y="150" font-family="Verdana" font-size="13" font-weight="600">Worker System</text>
  <text x="1100" y="170" font-family="Verdana" font-size="12">Consumes Redis queue, executes agent logic</text>
  <text x="1100" y="190" font-family="Verdana" font-size="12">Retrieves embeddings, calls LLM Adapter</text>
  <text x="1100" y="210" font-family="Verdana" font-size="12">Saves logs and results</text>

  <!-- LLM Adapter -->
  <rect x="1080" y="340" width="340" height="140" rx="10" fill="#fff7f0" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="1100" y="370" font-family="Verdana" font-size="13" font-weight="600">LLM Adapter</text>
  <text x="1100" y="390" font-family="Verdana" font-size="12">Connects to OpenAI / Anthropic</text>
  <text x="1100" y="410" font-family="Verdana" font-size="12">Manages retries, token limits, and streaming</text>

  <!-- Postgres -->
  <rect x="420" y="360" width="240" height="120" rx="8" fill="#f3f7ff" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="440" y="390" font-family="Verdana" font-size="13" font-weight="600">PostgreSQL Database</text>
  <text x="440" y="410" font-family="Verdana" font-size="12">Stores users, agents, tasks, logs</text>

  <!-- Vector DB -->
  <rect x="700" y="360" width="240" height="120" rx="8" fill="#f3fff3" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="720" y="390" font-family="Verdana" font-size="13" font-weight="600">Vector DB (Weaviate / Pinecone)</text>
  <text x="720" y="410" font-family="Verdana" font-size="12">Embeddings and semantic memory</text>

  <!-- Blob Storage -->
  <rect x="60" y="360" width="240" height="120" rx="8" fill="#fffdf6" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="80" y="390" font-family="Verdana" font-size="13" font-weight="600">Blob Storage (S3 / GCS)</text>
  <text x="80" y="410" font-family="Verdana" font-size="12">Stores uploaded raw files</text>

  <!-- Observability -->
  <rect x="420" y="600" width="240" height="100" rx="8" fill="#fff8fb" stroke="#2b2b2b" filter="url(#shadow)"/>
  <text x="440" y="630" font-family="Verdana" font-size="13" font-weight="600">Observability Stack</text>
  <text x="440" y="650" font-family="Verdana" font-size="12">Prometheus, Grafana, Sentry</text>

  <!-- Arrows -->
  <line x1="360" y1="190" x2="420" y2="190" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="390" y="180" font-family="Verdana" font-size="11" text-anchor="middle">HTTPS API Calls</text>

  <line x1="740" y1="200" x2="820" y2="200" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="780" y="190" font-family="Verdana" font-size="11" text-anchor="middle">Task Enqueue</text>

  <line x1="1020" y1="200" x2="1080" y2="200" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="1050" y="190" font-family="Verdana" font-size="11" text-anchor="middle">Consume Task</text>

  <line x1="1250" y1="280" x2="1250" y2="340" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="1270" y="310" font-family="Verdana" font-size="11">LLM Request</text>

  <line x1="660" y1="320" x2="660" y2="360" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="680" y="340" font-family="Verdana" font-size="11">DB Writes</text>

  <line x1="1160" y1="460" x2="1160" y2="280" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="1180" y="370" font-family="Verdana" font-size="11">Response Stream</text>

  <line x1="820" y1="420" x2="1080" y2="420" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="950" y="410" font-family="Verdana" font-size="11" text-anchor="middle">Embeddings / Context Retrieval</text>

  <line x1="300" y1="420" x2="420" y2="420" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="360" y="410" font-family="Verdana" font-size="11" text-anchor="middle">Upload Metadata</text>

  <line x1="1260" y1="460" x2="660" y2="600" stroke="#999" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="970" y="530" font-family="Verdana" font-size="11">Metrics and Logs</text>

  <line x1="300" y1="190" x2="60" y2="420" stroke="#888" stroke-width="1.4" marker-end="url(#arrow)"/>
  <text x="160" y="280" font-family="Verdana" font-size="11">File Upload (PUT)</text>

  <!-- Frontend Feedback -->
  <line x1="420" y1="260" x2="360" y2="260" stroke="#2b2b2b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="390" y="250" font-family="Verdana" font-size="11" text-anchor="middle">WebSocket Events</text>

  <!-- Legend -->
  <rect x="40" y="900" width="1400" height="70" rx="8" fill="#ffffff" stroke="#cccccc"/>
  <text x="60" y="925" font-family="Verdana" font-size="12">Legend: Arrows indicate major data flows (HTTP, Redis, DB, Storage). Data passes through layers - Frontend → Backend → Queue → Worker → LLM → Databases → Frontend.</text>
</svg>
